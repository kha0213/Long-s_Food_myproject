SELECT * FROM AD;
SELECT * FROM GRADES;
SELECT * FROM DELIVERY;
SELECT * FROM PRODUCT;
SELECT * FROM MEMBER;
select * from member m, grades g where m.mcumulative_buy between g.lowgrade and g.highgrade; 
UPDATE PRODUCT SET PDISCOUNT = 10 WHERE MGID='admin';
commit;
SELECT * FROM ORDERS;
SELECT * FROM CUSTOMER_SERVICE;
SELECT * FROM ORDER_DETAIL;
SELECT * FROM REVIEW;

SELECT * FROM REVIEW_RGOOD;
SELECT * FROM MANAGER;
SELECT * FROM MEMBER M, GRADES G WHERE M.MCUMULATIVE_BUY BETWEEN G.LOWGRADE AND G.HIGHGRADE AND MID='aaa';
SELECT GF.GNAME FROM GRADES GF WHERE GNO = (SELECT G.GNO+1 FROM MEMBER M, GRADES G WHERE M.MCUMULATIVE_BUY BETWEEN G.LOWGRADE AND G.HIGHGRADE AND M.MID='aaa');
--로그인 시 MID,MPW로 DTO가져오기
SELECT M.*,a.ad_email,a.ad_phone,a.ad_call,g.* FROM MEMBER M,AD A,GRADES G WHERE M.MID=A.MID AND m.mcumulative_buy between g.lowgrade and g.highgrade AND M.MID='aaa' AND MPW='11';

SELECT * FROM MANAGER WHERE MGID='' AND MGPW='';
SELECT * FROM MANAGER WHERE MGID='1';

SELECT COUNT(*) FROM PRODUCT;
-- product 정렬 top-n

SELECT * FROM PRODUCT ORDER BY preview_count DESC;

SELECT * FROM PRODUCT ORDER BY PREGIST DESC, preview_count DESC;

SELECT * FROM (SELECT ROWNUM RN, A.* FROM (SELECT P.*,M.MGNAME FROM PRODUCT P,MANAGER M WHERE P.MGID = M.MGID ORDER BY PPRICE, preview_count DESC) A)
 WHERE RN BETWEEN 5 AND 10;

SELECT * FROM (SELECT ROWNUM RN,C.* FROM (SELECT CS.*,M.MNAME FROM CUSTOMER_SERVICE CS, MEMBER M WHERE CS.MID=M.MID ORDER BY CGROUP DESC,CGROUP_OUTNUM) C)
    WHERE RN BETWEEN 5 AND 10;
    
SELECT CS.*,M.MNAME FROM customer_service CS, MEMBER M WHERE CNO='1';

SELECT M.*,ONO FROM MEMBER M, ORDERS O WHERE M.MID=O.MID AND M.MID='aaa';
SELECT * FROM ORDERS;

INSERT INTO ORDERS VALUES(ONO_SEQ.NEXTVAL,SYSDATE,NULL,1,'aaa');
SELECT MAX(ONO) FROM ORDERS;
SELECT * FROM DELIVERY;
INSERT INTO DELIVERY (DNO,DPRICE,DCOMPANY,parrive_date) VALUES('WWW',2500,'한진',NULL);


SELECT O.* FROM MEMBER M, ORDERS O WHERE M.MID=O.MID AND M.MID='aaa';
--주문한 적 있는 상품인지 보기 (이주일 안에)
SELECT * FROM MEMBER M,ORDERS O,order_detail OD WHERE M.MID=O.MID AND O.ONO=OD.ONO AND O.ODATE BETWEEN SYSDATE-14 AND SYSDATE AND PCODE='testPcode2';


SELECT * FROM REVIEW R,MEMBER M WHERE R.MID=M.MID;

UPDATE MEMBER SET MSTATUS=0 WHERE MID='aaa';
COMMIT;
SELECT MAX(ONO) FROM ORDERS;
SELECT MAX(DNO) FROM delivery;
SELECT * FROM delivery;
-- 다음 등급보기
SELECT g.highgrade-m.mcumulative_buy MONEY,(SELECT GNAME FROM GRADES WHERE GNO=G.GNO+1) GRADE FROM MEMBER M,GRADES G WHERE M.GNO=G.GNO AND MID='aaa';

--리뷰 쓸 수 있나 없나
SELECT * FROM MEMBER M, ORDERS O, ORDER_DETAIL OD WHERE O.ONO=OD.ONO AND O.MID=M.MID AND M.MID='aaa' AND PCODE='testPcode2' AND O.ODATE BETWEEN SYSDATE-14 AND SYSDATE;
SELECT * FROM MEMBER M,ORDERS O,ORDER_DETAIL OD WHERE M.MID=O.MID AND O.ONO=OD.ONO AND O.PCODE='testPcode2' AND O.ODATE BETWEEN SYSDATE-14 AND SYSDATE;

--리뷰 페이징
SELECT * FROM (SELECT ROWNUM RN,A.* FROM (SELECT R.*,P.PNAME FROM REVIEW R,PRODUCT P WHERE R.PCODE=P.PCODE AND P.PCODE='testPcode2' ORDER BY RGOOD DESC, RDATE DESC) A) WHERE RN BETWEEN 1 AND 10;
SELECT * FROM REVIEW R,review_comment RC WHERE R.RNO=RC.RNO AND R.RNO=1;

--리뷰 comment 있나 없나 찾기
SELECT * FROM REVIEW R,REVIEW_COMMENT RC WHERE R.RNO=RC.RNO AND R.RNO=1;
INSERT INTO review_comment (rcno,RNO,MGID,RCCONTENT) VALUES (RCNO_SEQ.NEXTVAL,1,'admin','댓글');
commit;
-- 상품 평점 보기

SELECT NVL(ROUND(AVG(RSTAR),1),-1) FROM REVIEW R,PRODUCT P WHERE R.PCODE=P.PCODE AND P.PCODE='testPcode3';
UPDATE PRODUCT SET PRATING=1 WHERE PCODE='testPcode2';
commit;
--장바구니에 추가한 제품인지 확인
SELECT * FROM CART WHERE MID='aaa' AND PCODE='testPcode3';
--주문 성공 후 카트 비우기
DELETE FROM CART WHERE MID='aaa';
SELECT * FROM CART;

SELECT C.*,P.PSTOCK,P.PDISCOUNT FROM CART C,PRODUCT P,MEMBER M WHERE M.MID=C.MID AND P.PCODE=C.PCODE AND MID='aaa';